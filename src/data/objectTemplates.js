/**
 * Pre-built object templates for common banking data models
 * These templates can be used as-is or customized by users
 */

export const OBJECT_TEMPLATES = [
  {
    id: 'template_member',
    name: 'member_object',
    label: 'Member Object',
    description: 'Core member/customer identity record. Stores basic member information with hashed sensitive data for security compliance.',
    icon: 'Users',
    category: 'core',
    tags: ['member', 'customer', 'identity', 'core'],
    fields: [
      {
        name: 'member_id_hash',
        label: 'Member ID (Hashed)',
        description: 'Hashed member identifier from core banking system',
        dataType: 'text',
        fieldType: 'standard',
        required: true,
        unique: true,
        indexed: true,
      },
      {
        name: 'ssn_hash',
        label: 'SSN (Hashed)',
        description: 'Hashed social security number for secure identification',
        dataType: 'text',
        fieldType: 'standard',
        required: false,
        unique: true,
        indexed: true,
      },
      {
        name: 'first_name',
        label: 'First Name',
        description: 'Member first name',
        dataType: 'text',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: false,
      },
      {
        name: 'last_name',
        label: 'Last Name',
        description: 'Member last name',
        dataType: 'text',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: true,
      },
      {
        name: 'email',
        label: 'Email Address',
        description: 'Primary email address for communications',
        dataType: 'email',
        fieldType: 'standard',
        required: true,
        unique: true,
        indexed: true,
      },
    ],
  },
  {
    id: 'template_account',
    name: 'account_object',
    label: 'Account Object',
    description: 'Individual product holdings with comprehensive financial details. Includes balance fields, dates, status indicators, and loan-specific data.',
    icon: 'Wallet',
    category: 'core',
    tags: ['account', 'product', 'balance', 'core'],
    fields: [
      // Account Identification
      {
        name: 'account_number',
        label: 'Account Number',
        description: 'Unique account identifier',
        dataType: 'text',
        fieldType: 'standard',
        required: true,
        unique: true,
        indexed: true,
      },
      {
        name: 'account_type',
        label: 'Account Type',
        description: 'Type of account or product',
        dataType: 'enumeration',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: true,
        options: [
          { label: 'Checking', value: 'checking', isDefault: false },
          { label: 'Savings', value: 'savings', isDefault: false },
          { label: 'Money Market', value: 'money_market', isDefault: false },
          { label: 'Certificate of Deposit', value: 'cd', isDefault: false },
          { label: 'Auto Loan', value: 'auto_loan', isDefault: false },
          { label: 'Personal Loan', value: 'personal_loan', isDefault: false },
          { label: 'Mortgage', value: 'mortgage', isDefault: false },
          { label: 'HELOC', value: 'heloc', isDefault: false },
          { label: 'Credit Card', value: 'credit_card', isDefault: false },
        ],
      },
      {
        name: 'account_suffix',
        label: 'Account Suffix',
        description: 'Account suffix code',
        dataType: 'text',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },

      // Balance Fields (13 fields)
      {
        name: 'current_balance',
        label: 'Current Balance',
        description: 'Current account balance',
        dataType: 'currency',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: false,
      },
      {
        name: 'available_balance',
        label: 'Available Balance',
        description: 'Available balance for withdrawal',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'pending_balance',
        label: 'Pending Balance',
        description: 'Pending transactions',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'hold_balance',
        label: 'Hold Balance',
        description: 'Funds on hold',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'original_balance',
        label: 'Original Balance',
        description: 'Original loan amount (for loans)',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'principal_balance',
        label: 'Principal Balance',
        description: 'Remaining principal (for loans)',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'interest_paid_ytd',
        label: 'Interest Paid YTD',
        description: 'Year-to-date interest paid',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'dividends_paid_ytd',
        label: 'Dividends Paid YTD',
        description: 'Year-to-date dividends paid',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'minimum_balance',
        label: 'Minimum Balance',
        description: 'Minimum balance requirement',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'credit_limit',
        label: 'Credit Limit',
        description: 'Credit limit (for credit cards/lines)',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'payment_amount',
        label: 'Payment Amount',
        description: 'Regular payment amount (for loans)',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'minimum_payment',
        label: 'Minimum Payment',
        description: 'Minimum payment due',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'average_balance',
        label: 'Average Balance',
        description: 'Average balance over period',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },

      // Date Fields (8 fields)
      {
        name: 'open_date',
        label: 'Open Date',
        description: 'Date account was opened',
        dataType: 'date',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: true,
      },
      {
        name: 'close_date',
        label: 'Close Date',
        description: 'Date account was closed',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'maturity_date',
        label: 'Maturity Date',
        description: 'Maturity date (for CDs, loans)',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'last_transaction_date',
        label: 'Last Transaction Date',
        description: 'Date of most recent transaction',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'last_payment_date',
        label: 'Last Payment Date',
        description: 'Date of last payment (for loans)',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'next_payment_date',
        label: 'Next Payment Date',
        description: 'Date of next payment due',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'charge_off_date',
        label: 'Charge-Off Date',
        description: 'Date account was charged off',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'last_statement_date',
        label: 'Last Statement Date',
        description: 'Date of last statement',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },

      // Status Indicators (18 Y/N fields)
      {
        name: 'is_active',
        label: 'Is Active',
        description: 'Whether account is currently active',
        dataType: 'boolean',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: true,
      },
      {
        name: 'is_dormant',
        label: 'Is Dormant',
        description: 'Whether account is dormant',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'is_delinquent',
        label: 'Is Delinquent',
        description: 'Whether account is delinquent',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'is_charged_off',
        label: 'Is Charged Off',
        description: 'Whether account has been charged off',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'is_joint',
        label: 'Is Joint Account',
        description: 'Whether account has multiple owners',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'is_primary',
        label: 'Is Primary Account',
        description: 'Whether this is the primary account for member',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'has_overdraft_protection',
        label: 'Has Overdraft Protection',
        description: 'Whether overdraft protection is enabled',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'has_debit_card',
        label: 'Has Debit Card',
        description: 'Whether account has an active debit card',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'has_online_banking',
        label: 'Has Online Banking',
        description: 'Whether online banking is enabled',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'has_mobile_banking',
        label: 'Has Mobile Banking',
        description: 'Whether mobile banking is enabled',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'has_auto_payment',
        label: 'Has Auto Payment',
        description: 'Whether automatic payments are set up',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'has_paper_statements',
        label: 'Has Paper Statements',
        description: 'Whether member receives paper statements',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'has_estatements',
        label: 'Has eStatements',
        description: 'Whether member receives electronic statements',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'is_past_due',
        label: 'Is Past Due',
        description: 'Whether payment is past due',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'is_in_collections',
        label: 'Is In Collections',
        description: 'Whether account is in collections',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'is_frozen',
        label: 'Is Frozen',
        description: 'Whether account is frozen',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'is_restricted',
        label: 'Is Restricted',
        description: 'Whether account has restrictions',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'is_external_loan',
        label: 'Is External Loan',
        description: 'Whether this is a loan from another institution',
        dataType: 'boolean',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },

      // Loan-Specific Fields
      {
        name: 'interest_rate',
        label: 'Interest Rate',
        description: 'Annual interest rate (percentage)',
        dataType: 'number',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'loan_term',
        label: 'Loan Term',
        description: 'Loan term in months',
        dataType: 'number',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'days_delinquent',
        label: 'Days Delinquent',
        description: 'Number of days payment is overdue',
        dataType: 'number',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },

      // Calculated Fields
      {
        name: 'account_age_days',
        label: 'Account Age (Days)',
        description: 'Number of days since account was opened',
        dataType: 'number',
        fieldType: 'calculated',
        required: false,
        unique: false,
        indexed: false,
        calculation: {
          calculationType: 'date_difference',
          formula: 'TODAY() - open_date',
        },
      },
      {
        name: 'days_until_maturity',
        label: 'Days Until Maturity',
        description: 'Days until CD/loan maturity',
        dataType: 'number',
        fieldType: 'calculated',
        required: false,
        unique: false,
        indexed: false,
        calculation: {
          calculationType: 'date_difference',
          formula: 'maturity_date - TODAY()',
        },
      },
    ],
  },
  {
    id: 'template_household',
    name: 'household_object',
    label: 'Household Object',
    description: 'Groups related members into households for relationship aggregation. Useful for calculating total household value and coordinating marketing across family units.',
    icon: 'Home',
    category: 'relationship',
    tags: ['household', 'family', 'relationship'],
    fields: [
      {
        name: 'household_id',
        label: 'Household ID',
        description: 'Unique household identifier',
        dataType: 'text',
        fieldType: 'standard',
        required: true,
        unique: true,
        indexed: true,
      },
      {
        name: 'household_name',
        label: 'Household Name',
        description: 'Household name (e.g., "Smith Family")',
        dataType: 'text',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: false,
      },
      {
        name: 'primary_address',
        label: 'Primary Address',
        description: 'Household primary address',
        dataType: 'multiline_text',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'total_member_count',
        label: 'Total Member Count',
        description: 'Number of members in household',
        dataType: 'number',
        fieldType: 'calculated',
        required: false,
        unique: false,
        indexed: false,
        calculation: {
          calculationType: 'count',
          sourceObjectId: 'member_object',
        },
      },
      {
        name: 'total_relationship_value',
        label: 'Total Relationship Value',
        description: 'Combined value of all member accounts',
        dataType: 'currency',
        fieldType: 'calculated',
        required: false,
        unique: false,
        indexed: false,
        calculation: {
          calculationType: 'sum',
          sourceObjectId: 'account_object',
          sourceFieldId: 'current_balance',
        },
      },
      {
        name: 'household_created_date',
        label: 'Household Created Date',
        description: 'Date household was created',
        dataType: 'date',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: false,
      },
    ],
  },
  {
    id: 'template_loan_application',
    name: 'loan_application_object',
    label: 'Loan Application Object',
    description: 'Tracks loan applications from submission to decision. Enables journey orchestration based on application status and automates follow-up communications.',
    icon: 'FileText',
    category: 'lending',
    tags: ['loan', 'application', 'lending', 'pipeline'],
    fields: [
      {
        name: 'application_id',
        label: 'Application ID',
        description: 'Unique application identifier',
        dataType: 'text',
        fieldType: 'standard',
        required: true,
        unique: true,
        indexed: true,
      },
      {
        name: 'application_type',
        label: 'Application Type',
        description: 'Type of loan being applied for',
        dataType: 'enumeration',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: true,
        options: [
          { label: 'Auto Loan', value: 'auto_loan', isDefault: false },
          { label: 'Personal Loan', value: 'personal_loan', isDefault: false },
          { label: 'Mortgage', value: 'mortgage', isDefault: false },
          { label: 'HELOC', value: 'heloc', isDefault: false },
          { label: 'Credit Card', value: 'credit_card', isDefault: false },
        ],
      },
      {
        name: 'application_status',
        label: 'Application Status',
        description: 'Current status of application',
        dataType: 'enumeration',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: true,
        options: [
          { label: 'Draft', value: 'draft', isDefault: true },
          { label: 'Submitted', value: 'submitted', isDefault: false },
          { label: 'Under Review', value: 'under_review', isDefault: false },
          { label: 'Approved', value: 'approved', isDefault: false },
          { label: 'Denied', value: 'denied', isDefault: false },
          { label: 'Withdrawn', value: 'withdrawn', isDefault: false },
          { label: 'Funded', value: 'funded', isDefault: false },
        ],
      },
      {
        name: 'requested_amount',
        label: 'Requested Amount',
        description: 'Amount requested by applicant',
        dataType: 'currency',
        fieldType: 'standard',
        required: true,
        unique: false,
        indexed: false,
      },
      {
        name: 'approved_amount',
        label: 'Approved Amount',
        description: 'Amount approved by underwriter',
        dataType: 'currency',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'submitted_date',
        label: 'Submitted Date',
        description: 'Date application was submitted',
        dataType: 'datetime',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: true,
      },
      {
        name: 'decision_date',
        label: 'Decision Date',
        description: 'Date decision was made',
        dataType: 'datetime',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'funding_date',
        label: 'Funding Date',
        description: 'Date loan was funded',
        dataType: 'date',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'credit_score',
        label: 'Credit Score',
        description: 'Applicant credit score',
        dataType: 'number',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'debt_to_income_ratio',
        label: 'Debt-to-Income Ratio',
        description: 'DTI ratio (percentage)',
        dataType: 'number',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'denial_reason',
        label: 'Denial Reason',
        description: 'Reason for denial (if denied)',
        dataType: 'multiline_text',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
      },
      {
        name: 'application_source',
        label: 'Application Source',
        description: 'How application was initiated',
        dataType: 'enumeration',
        fieldType: 'standard',
        required: false,
        unique: false,
        indexed: false,
        options: [
          { label: 'Online Application', value: 'online', isDefault: false },
          { label: 'Branch', value: 'branch', isDefault: false },
          { label: 'Phone', value: 'phone', isDefault: false },
          { label: 'Dealer (Auto)', value: 'dealer', isDefault: false },
        ],
      },
    ],
  },
];

/**
 * Get template by ID
 * @param {string} templateId - Template ID
 * @returns {Object|null} - Template object or null if not found
 */
export const getTemplateById = (templateId) => {
  return OBJECT_TEMPLATES.find(t => t.id === templateId) || null;
};

/**
 * Get templates by category
 * @param {string} category - Category name
 * @returns {Array} - Array of templates in category
 */
export const getTemplatesByCategory = (category) => {
  return OBJECT_TEMPLATES.filter(t => t.category === category);
};

/**
 * Search templates by tag or name
 * @param {string} query - Search query
 * @returns {Array} - Array of matching templates
 */
export const searchTemplates = (query) => {
  const lowerQuery = query.toLowerCase();
  return OBJECT_TEMPLATES.filter(t =>
    t.name.toLowerCase().includes(lowerQuery) ||
    t.label.toLowerCase().includes(lowerQuery) ||
    t.description.toLowerCase().includes(lowerQuery) ||
    t.tags.some(tag => tag.toLowerCase().includes(lowerQuery))
  );
};
